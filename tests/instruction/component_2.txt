This test checks the datasource attribute.

>>>>templates/test.tpl
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<opt:component from="$component" datasource="$datasource">
</opt:component>

>>>>data.php

if(!class_exists('myComponent'))
{
	class myComponent implements Opt_Component_Interface
	{
		private $params = array();

		public function __construct($name = '')
		{
			/* null */
		} // end __construct();

		public function setView(Opt_View $view)
		{
			echo "VIEW PASSED\r\n";
		} // end setView();

		public function setDatasource(&$data)
		{
			if(is_array($data))
			{
				echo "DATASOURCE PASSED\r\n";
			}
		} // end setDatasource();

		public function set($name, $value)
		{
			$this->params[$name] = $value;
			echo "PARAM ".$name." PASSED\r\n";
		} // end set();

		public function get($name)
		{
			echo "PARAM ".$name." RETURNED\r\n";
			return $this->params[$name];
		} // end set();

		public function defined($name)
		{
			/* null */
		} // end defined();

		public function display($attributes = array())
		{
			if(sizeof($attributes) == 0)
			{
				echo "COMPONENT DISPLAYED\r\n";
			}
			else
			{
				echo "COMPONENT DISPLAYED WITH:\r\n";
			}
			foreach($attributes as $name => $value)
			{
				echo $name.': '.$value."\r\n";
			}
		} // end display();

		public function processEvent($name)
		{
			if($name == 'falseEvent')
			{
				echo "FALSE EVENT CHECKED\r\n";
				return false;
			}
			echo "TRUE EVENT LAUNCHED\r\n";
			return true;
		} // end processEvent();

		public function manageAttributes($tagName, Array $attributes)
		{
			echo "ATTRIBUTE MANAGEMENT FOR: ".$tagName."\r\n";
			foreach($attributes as $name => $value)
			{
				echo $name.': '.$value."\r\n";
			}
			return $attributes;
		} // end manageAttributes();
	} // end myComponent;
}
$view->component = new myComponent;
$view->datasource = array('foo' => 'bar');

>>>>expected.txt
OUTPUT

>>>>result.txt
VIEW PASSED
DATASOURCE PASSED
