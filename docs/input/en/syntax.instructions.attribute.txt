Title: opt:attribute
SeeAlso:
 - syntax.instructions.tag

----

`opt:attribute` defines a new, dynamic attribute in the parent tag. It does not have a content, but takes two attributes that identify the name and the value of the new attribute:

 Name           | Type                | Required? | Description
----------------|---------------------|-----------|:-----------------------------------
 name           | Expression          | Yes       | New attribute name
 value          | Expression          | Yes       | New attribute value
 ns             | Expression          | No        | Attribute namespace

Below, you can find an example that allows to define a new attribute for `<div>` whose name is read from the variable:

~~~~
[xml]
<div>
	<opt:attribute name="$attributeName" value="$attributeValue"/>
	Content
</div>
~~~~

The instruction cooperates with OPT instruction attributes. If we wish to read the attribute list from a section, we can use the following solution:

~~~~
[xml]
<div>
	<opt:attribute name="$attributes.name" value="$attributes.value" opt:section="attributes"/>
	Content
</div>
~~~~

> [error]
> `opt:attribute` cannot add attributes to other OPT instructions, except for `opt:tag`.

Conditional attributes
----------------------

`opt:attribute` can also cooperate with [opt:if][syntax.attributes.if] attribute to add an attribute to the parent tag conditionally.

~~~~
[xml]
<div>
	<opt:attribute name="class" value="highlight" opt:if="$highlightDiv"/>
	Content
</div>
~~~~

Handling namespaces
-------------------

The optional attribute `ns` can be used to set the attribute namespace. The value may be loaded from a variable or specified manually, for example:

~~~~
[xml]
<foo>
    <opt:attribute str:ns="xml" name="$attrName" value="$attrValue" />
</foo>

<foo>
    <opt:attribute ns="$ns" str:name="foo" value="$attrValue" />
</foo>
~~~~

> [help]
> The `ns` attribute accepts empty values. The namespace part is not generated then.